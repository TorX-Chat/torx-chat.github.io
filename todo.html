<!DOCTYPE html>
<html>
<head>
	<title>TorX | Project-Wide Unified TODO List</title>
	<link rel='shortcut icon' href='https://raw.githubusercontent.com/TorX-Chat/torx-gtk4/main/other/icon_round.ico'/>
	<style>
		a:link, a:visited {
			color: #add8e6;
		}
		body {
			margin: 0;
			padding: 0;
			height: 200%; /* to make sure there's enough content to scroll */
			background-color: #181a1b;
			color: white;
		}
		nav {
			position: fixed;
			width: 100%;
			background-color: #333;
			color: white;
			padding: 5px 0;
			text-align: center;
			z-index: 1000; /* ensures the nav stays on top of other content */
		}
		section {
			margin-left: 5px;
			padding-top: 30px; /* extra space to ensure content is not hidden behind the fixed nav */
		}
	</style>
</head>
<body>
	<nav>
		<a href="index.html">Home</a>
		<a href="#schedule">Schedule</a>
		<a href="#library">Library</a>
		<a href="#ui">UI</a>
		<a href="#gtk4">GTK4</a>
		<a href="#flutter">Flutter</a>
	</nav>
	<section id="schedule">
		<h1>Project-Wide Unified TODO List / Schedule</h1>
		<img alt="Logo" width="256" height="256" src="https://raw.githubusercontent.com/TorX-Chat/torx-gtk4/main/other/scalable/apps/logo-torx-symbolic.svg" align="right" style="position: relative; top: 0; left: 0;">
		<h3>Schedule</h3>
		<h4>Ideal full-release date:</h4>
		<ul>
			<li>Before November 5th 2024 (Election day)</li>
		</ul>
		<h4>Minimal project-wide goals before full-release:</h4>
		<ul>
			<li>Proper documentation of base protocols / handshake</li>
			<li>Doxygen compatible documentation (?) at least for UI exposed library functions</li>
			<li>MacOS build</li>
			<li>Library stability</li>
		</ul>	
		<h4>Ideal project-wide goals before full-release:</h4>
		<ul>
			<li>Voice notes (in the UI clients)</li>
			<li>Walkie-Talkie mode (in the UI clients)</li>
			<li>Ncurses client</li>
			<li>CLI/API client for integration with AI bots/etc (Julia)</li>
			<li>Google PlayStore listing</li>
			<li>Packaging for most major Linux/BSD distributions (official or otherwise)</li>
			<li>iOS support</li>
		</ul>
		<h4>For public discussion:</h4>
		<ul>
			<li>Be able to drag messages / completed files to other peers? Accidents could occur. Another option is "Forward to".</li>
			<li>Putting in a "wrong" password could be made impossible. We could accept any password and just create a new config file. When unlocking, we could try the hashed password (decryption_key) against all config files.</li>
			<li>Keyboard Privacy in Flutter being enabled by default: it breaks non-alphabetical languages such as Chinese</li>
			<li>Git submodules vs ExternalProjects_Add vs other?</li>
			<li>Seperate "keys" and "settings" databases? Currently a bad setting can crash the application (such as a bunk sticker). UI developers should work to prevent this, rather than working around the problem in a brutal fashion such as by encouraging users to delete their settings database. (which would be very hard on mobile). If implementing, remember to implement in change_password.</li>
			<li>Use timezone info to determine default torrc? (this could really be a UI thing, though we do have the censored_region variable in lib). Timezone + language would be more effective.</li>
			<li>Hardcoded nick length limit of 56 is unnecessary and possibly problematic: not all characters are 1 byte. Example: emojis, chinese characters, etc.</li>
			<li>File transfers: fallocate(linux)/lseek(linux) or pre-allocate files in some sort of null state. Would have to do this in OS specific manners https://devblogs.microsoft.com/oldnewthing/20160714-00/?p=93875</li>
		<!--	<li>M****o-cli integration (not before full release / 2025)</li>
			<ul>
				<li>Might be difficult to implement for mobile if unsafe shutdowns of M****o cause b********n indexing corruption. However M****o-cli offers remote b********n options that would probably be safe from unsafe shutdowns.</li>
				<li>Can reptyr steal control of a CLI program running in fork? (presuming no, but can other methods?) If so then we need to integrate M****o by function calls rather than CLI. Should talk to devs or look at existing implementations.</li>
			</ul> -->
		</ul>
	<section id="library">
		<h3>TODO List for TorX Library:</h3>
		<h4>High Priority / Security Audit:</h4>
		<ul>
			<li>Deleting large amounts messages (~10+ or all) then sending/receiving a new message to/from the same peer causes crash.</li>
			<ul>
				<li>NOTE: may only apply when deleting i < 0 messages (those loaded via load_more_messages).</li>
			</ul>
			<li>output_cb reported message pos > message_len:</li>
			<ul>
				<li>32 > 0. Protocol: Sticker Request. Likely will corrupt message. Packet len was 40</li>
				<li>494 > 0. Protocol: Sticker data. Likely will corrupt message. Packet len was 498</li>
			</ul>
			<li>File transfer checksums fail after combination of sender crashes, stickers, messages, multi-file transfers, etc. Need audit.</li>
		<!--	<li>Deleting more than 10 messages then sending/receiving a new message results in realloc attempting to shrink the message struct, and then there can be other issues.</li>
			<ul>
				<li>We should probably resize the struct (down) when we delete message history, or</li>
				<li>We should use a linked list for our messages (like we do with group messages), instead of an array of struct</li>
				<ul>
					<li>With enough work, we could eliminate n,i,g,f by using linked lists</li>
					<li>We would pass around abstracted structs for each peer/message/etc.</li>
					<li>For indexing, we use msg_index_iter && msg_index. See group_list usage for example.</li>
					<li>Pointer vs double pointer? How would we handle deletion/free?</li>
					<ul>
						<li>Without double pointers, we would just free everything and remove from linked list.</li>
						<li>Any references would have to be removed, or problems would occur.</li>
					</ul>
				</ul>
			</ul> -->
			<li>libevent.c read_conn: be careful not to cause reads beyond message length (event_strc->buffer_len / packet_len)</li>
			<li>Callback for invalid or incomplete message (which could be illict attempts to ping or do traffic analysis).</li>
			<ul>
				<li>Minor notice for incomplete, major for invalid + counter.</li>
				<li>Warning: After a file is cancelled, a peer can keep sending data or re-start sending data and we receive/disgard it. This could be exploited to monitor a peer.</li>
				<li>Need to somehow notify a peer that such packets are still inbound.</li>
				<li>Issue: Incomplete messages come in frequently in normal operation (faster than a monitor's framerate)</li>
				<li>Issue: Invalid messages could come *incredibly* infrequently, if a malicious peer (ie, a peer could report a 1000 GB message and send it over weeks, never triggering an 'invalid' warning).</li>
				<li>Thought: Invalid messages already report errors, so do we *really* need redundant callback, which has very little legitimate value?</li>
			</ul>
			<li>Need a red team building malicious or buggy client/library, which will send undersized/oversized messages, spam attacks, etc.</li>
		</ul>
		<h4>Medium Priority:</h4>
		<ul>
			<li>PROPOSE_UPGRADE:</li>
			<ul>
				<li>After acting on a PROPOSE_UPGRADE, a restart is required before v3auth will be implemented. This can be resolved.</li>
				<li>Currently we PROPOSE_UPGRADE on every connection. We can avoid that if we store the current value of the connection and not just peerversion.</li>
			</ul>
			<li>CMakeLists.txt:</li>
			<ul>
				<li>set(SSL_ARCH linux-x86_64) is hardcoded, except on android. will be issues on *pi, postmarketOS, macbooks, etc.</li>
				<li>CMakeLists.txt files can be ran through AI. Add debug messages with message(STATUS hello) and run with cmake --trace for debugging.</li>
			</ul>
			<li>Prioritize our own broadcasts: Calling broadcast_add(-1,...), to add a group, could take a very long time because manually added groups are not prioritized in broadcast_threaded. Should probably have an additional queue of high priority (our own) broadcasts.</li>
			<li>Bug: Repeated blocking/unblocking of a peer causes crashes.</li>
			<li>Bug: Deleting of multiple PEER (sing/mult) causes crashes.</li>
			<li>Search (again) for ]; and ] = { then ensure zero'd.</li>
			<li>Streaming a group message is going to be a message struct bloat issue because, unlike other stream messages, upon outbound send it is not deleted from group_ctrl (the group_ctrl n,i is not zero_i'd). The solution is to somehow track when all the attempts are done (perhaps in message_send) and then zero_i it (see: sfaoij2309fjfw)</li>
			<li>Consider moving the message size and protocol behind the .message pointer (so we can avoid copying moving message when signing)</li>
			<li>Multi-Device / Blinded keys. Use the nonce method to generate blinded keys. Do it using onion_gen.c Upload it using HSPOST. See src/feature/hs/hs_common.c for creation of blinded keys. See any mentions of "blind" "period" "time" in the src. I think HSPOST is somehow combined with ADD_ONION to publish? Unsure and will need to ask #tor-dev</li>
			<li>GROUP FILE TRANSFER Documentation: Outbound uses peer_n fd for disk reads, Inbound uses group_ctrl fd for disk writes. When receiving file request, it appears we store outbound date in the group_peer_n. This needs to be documented/understood. When changing file status in process_pause_cancel, we might need to iterate through the relevant group_peer_n and set their status too? idk if we store status there or only transfer amount.</li>
			<li>We can't support uint64_t file sizes because ftell/fseek only support long int. Unsure what to do about this. It affects our file transfer protocols.</li>
			<li>accept_automatically. Can either be a toggle or a size slider. size_t is probably most logical. Could also have a list of accepted filetypes. NOTE: Enabling this option will require a check for download_dir. Also, this option should could be DANGEROUS for insecure platforms like Windows/OSX/iOS/Android, where CSAM scanning exists.</li>
			<li>If a split_folder exists, files inside should be labelled via truncated checksum rather than filename.</li>
			<li>Hash is written to disk in plaintext for our .split file. Perhaps we should encrypt (no) or salt + rehash it (not all hashes, just this hash written to .split file). The reason we don't is because the file itself is written next to it, so what is the security in having the hash salted? We do attempt to securely delete .split files.</li>
			<li>Requesting a 1 byte file in full duplex causes an integer overflow / request of a 18446744073709551615 byte file, causing offerer to crash. Need a sanity check that requests are not > file size</li>
			<li>Sodium memory management overhead: Check for compile-time flags that could disable the wasted pages except on debug builds. sodium_malloc() wastes too much memory by allocating 4kb of space for each malloc. See <a href="https://github.com/jedisct1/libsodium/blob/master/src/libsodium/sodium/utils.c">HAVE_PAGE_PROTECTION</a></li>
			<li>iOS (Orbot) / System Tor: We need to re-write tor_call so that all calls are on a single connection and ADD_ONION does not utilize "Detached". See Tor's control-spec.txt. That will enable us to run safely without control_password. However it will not achieve Orbot compatibility at least on Android (which starts up with a random CTRL_PORT). We could work with their devs to get them to resolve the issue.</li>
			<li>Tor not dying keeps onions online after crash. Consider the viability of a Tor Killer process that will kill Tor if TorX's PID dies. It could just be a wait() kill() process, being forked from TorX with possession of both Tor and TorX PIDs. This would be useful to ensure that Tor and its hidden services aren't left hanging if TorX crashes or is improperly closed. NOTE: probably better to use just not use detached? Next startup would kill tor via PID.</li>
			<li>Clean up error messages / notices / checkpoints using macro defined levels to determine whether debug level + whether they contain sensitive info.</li>
		</ul>
		<h4>Low Priority:</h4>
		<ul>
			<li>Onloading/offloading old messages:</li>
			<ul>
				<li>1) Offloading: Should leave us with just -10 to 10 initialized, on all peers</li>
				<li>2) Cache / Re-loading / Merging cache:</li>
				<ul>
					<li>When offloaded, we cache on the initialized message struct, then when re-loading, we just move to a temp local pointer, then sql_populate_message, then add back the cached messages via load_message_struc</li>
				</ul>
			</ul>
			<li>Support for 0 length messages was removed at some point. This is an artificial limitation that didn't always exist.</li>
			<li>Documentation: As of 2.0.10, PIPE_AUTH is signed and utilized when v3auth is not available (Tor <0.4.6.1) to facilitate secure full-duplex connections.</li>
			<li>Documentation: PROPOSE_UPGRADE works for ugprades from v1 (PIPE_AUTH) to v2 (v3auth), but cannot facilitate downgrades (and for many reasons should/will never). However, if both peers upgrade then disable v3auth, it will successfully fall back to PIPE_AUTH.</li>
			<li>Where multiple getter functions occur in a block, it would be more efficient to manually lock/unlock once.</li>
			<li>Could allow protocols to require an acknowledgement of receipt by sending a checksum back. Using a checksum is more CPU intensive than ideal but ensures the completeness of the message and does not require both sides to keep a shared index number of any type.</li>
			<li>Consider implementation of Proof of Work https://spec.torproject.org/hspow-spec/v1-equix.html for multiple use IDs, when sufficiently mature</li>
			<li>Convert or eliminate remaining ~100 printf to error_printf</li>
			<li>Takedown_onion must call disconnect_forever in a threadsafe manner. We've tried everything (evbuffer_lock, event_base_once, etc) and can't find a way.</li>
			<li>file_init() calculates a checksum every time it offers a file. We have modification time now but we don't use it for anything.</li>
			<li>Seems like old file descriptors get closed. If nothing is written in a long time, fd might get closed. Do we have any long-term fd?</li>
			<li>File descriptor leaks and limitations: ulimit -n shows we can only have 1024 file descriptors open at once. That's going to limit the potential of group chats. If we get near the limit, we could shed outbound (sendfd) connections? Not a great solution.</li>
			<li>Multiple offers of the same file to the same peer is undefined behavior, especially when changing filename. Test it.</li>
			<li>Lots of warnings occur when restarting Tor.</li>
			<li>Cascade deletion of messages and peer specific settings may be untested</li>
			<li>We don't have library protection against running twice. We implement "running" check in GTK. For now, this is ideal. No reason to change this.</li>
			<li>Is --keygen/--key-expiration only for relays? OfflineMasterKey/SigningKeyLifetime</li>
			<li>man atexit. May be useful. Note: Doesn't trigger on signals (ie ctrl + c). Not sure why this would be useful since we handle all exit() calls.</li>
			<li>Add a counter or bunch of counters that increment every time a malloc occurs, so we can know how many leaks we got. (optionally in what areas)</li>
			<li>Public Groups could hypothetically also be shortened in length (pointless), or allow external generation (pointless)</li>
			<li>Consider having UTF8 validator shift forward over any non-utf8 bytes, for use in libevent.c and perhaps message_send (to avoid sql issues), rather than discarding whole messages.</li>
			<li>For GROUP_PEER, .message and .message_len could be double pointer + pointer, respectively. Unsure if viable and how we would re-structure our message struct for that. This can be ignored for now so long as we aren't having bugs.</li>
			<li>Consider ripping out libsodium and replacing it with with openssl (since it is already a tor dependency) or libressl. Be sure that we can do everything in onion_gen.c (ex: crypto_sign_ed25519_pk_to_curve25519)</li>
		</ul>
		<h4>Possibly no longer relevant:</h4>
		<ul>
			<li>Tor going idle. "idle" ... "While not bootstrapping". Note: Not "dormant". See #tor logs for clarification.</li>
			<li>broadcast_threaded should ONLY message_send WHEN WE ARE CONNECTED, otherwise it will queue up all our messages and then send them all at once when we get online... totally defeating the purpose of a queue. This is easy to implement for ENUM_OWNER_CTRL (we can just check online status), but harder to implement with GROUP_CTRL.</li>
			<li>When requesting group files (in message_prep currently and select_peer, both), we should request a *random* largest section (+/- 1), rather than the first available one, to help the spread of the file into the network.</li>
			<li>If a peer pauses or cancels, or otherwise ignores file requests, some sections may end up unrequested until restart.</li>
			<li>Test in debugger before investing time: illegal reads could result if we have >10 group files, since everyting occurs on peer[n].file[f] of group_peer_n, which may not be allocated.</li>
			<li>If there is any file transfer corruption caused by repeated pauses and restarts, it is due to races on ].fd_out_</li>
			<li>2024/03/11 Utilizing the return of message_insert(), we could permit the modification of messages ... but only group messages, ???</li>
			<li>Putting no incoming auth doesn't prevent connections. Test this, but based on logs from invalid auth, it seems auth is optional.</li>
		</ul>
	<section id="ui">
		<h3>TODO List for Both UIs (Flutter and GTK4):</h3>
		<ul>
			<li>Should run a checksum after receiving sticker data</li>
			<li>Expose save_all_stickers toggle</li>
			<li>Check destination folder write permissions before allowing its' selection</li>
			<li>Implement .SVG buttons instead of .PNG, and colorize.</li>
			<li>Have a tooltip that shows TorX-IDs, at least on the group's peerlist</li>
			<li>Need to implement our fancy new .SVG icons (can wait for GTK4.14)</li>
			<li>Flash entry box red when no nick is entered for generating (generate_onion) or adding onion (save_peer), or when an invalid onion is passed (bad checksum)</li>
			<li>Multi-Select: Tables should allow multiple selections for deletion. It should show only Delete (or Accept + Reject).</li>
			<li>If someone is fast on the censored region toggle while waiting for login, it will save the setting but not take effect until next restart</li>
			<li>We need to do sanity checks on sticker/image data or people can be crashed with junk stickers/images. (Send 0 size .gif or bunk data for testing)</li>
			<li>Add/Generate pages need max length for entry fields (56 bytes), since we still use arbitrary maximum lengths for peernicks</li>
			<li>Facilitate msg searching via gtk_list_view_scroll_to in GTK4 and ?? in Flutter.</li>
			<li>Should probably have a "doing checksum" spinner or something for file transfers, so people don't add more than once</li>
			<li>Have a toggle for kill_delete. Delete or Disable options.</li>
			<li>Tooltips: Use text_tooltip_ prefix. For flutter, https://material.io/components/tooltips</li>
			<li>String functions in UI should use secure allocators/de-allocators, if possible. (Note: not possible?)</li>
			<li>Consider registering a URI? ie: "torx:" Base64 would be a grup, base32 would be a SING/MULT. is_valid_b32_input( and b64_isvalidchar( in conjunction can determine whether a string is peer/group/trash, for use with 'Search' or invalid input when adding peer.</li>
			<li>Could have a toggleable option about whether to run as a tor binary as a middle node (this would support the network, but be bandwidth eating)</li>
		</ul>
	<section id="gtk4">
		<h3>TODO List for GTK4 client:</h3>
		<ul>
		<!--	<li>Efficiency:</li>
		This is incorrect. message_builder is not called excessively, it seems? However, doing what is listed here could result in some improvement, just not as significant as stated.
			<ul>
				<li>When print_message has scroll==0, the IntPair should be cached in an array and later passed to g_list_store_splice when there is a scroll==1. This should prevent thousands of unnecessary calls to message_builder.</li>
				<li>Likewise, when scroll==-1, it should also be cached until reaching min_i.</li>
			</ul> -->
			<li>t_main.global_pos and ].pos need to be analysed. Whether they are fully working or not is unknown. It's likely that adding messages from pos==0 is breaking every subsequent .pos, which likely needs to be modified (so, if we add 15 messages from 0, every other message with >0 ].pos needs to be +=15. For efficiency, this would be done in the functions that call print_message, not in print_message itself).</li>
			<li>Windows build:</li>
			<ul>
				<li>Saving torrc results in warnings to override. Should complain to #tor if they persist.</li>
				<li>Need to ship an installer or just zip up the files (if that is sufficient).</li>
				<li>Need a "Microsoft code signing certificate"(?) to be able to distribute without warnings.</li>
				<li>"Microsoft Store" listing should be considered.</li>
				<li>Note for devs: torx-tray.exe may not die when TorX is abruptly killed (ex: ctrl+c in GDB) because TCP connections are not properly closed. Unavoidable without dropping a PID file, but this should only be an issue for devs who are repeatedly building in the same directory of execution (builds might fail on torx-tray.exe because it is running). This issue should not exist for users because multiple instances of torx-tray.exe can run concurrently.</li>
			</ul>
			<li>Fully Mitigated by GTK_FACTORY_BUG=1: g_list_store_insert/splice in GTK4 are horribly inefficient until https://gitlab.gnome.org/GNOME/gtk/-/merge_requests/7420 gets merged</li>
			<li>Partially mitigated by GTK_FACTORY_BUG=1: Loading chats is horribly slow until gtk_list_base_set_anchor_max_widgets stops being passed GTK_LIST_VIEW_MAX_LIST_ITEMS as n_center, because it builds 205 widgets.</li>
			<li>INVERSION_TEST is necessary until https://gitlab.gnome.org/GNOME/gtk/-/issues/4680 gets resolved</li>
			<li>While minimized to tray, message scroll doesn't really work. The scroll_func_idle gets called, but to no effect.</li>
			<li>ListView should be a direct child of ScrolledWindow. If it is a child of a box, there may be issues if having >205 widgets (experienced in a test build). There are 3 places where we might face this issue (ctrl+f gtk_list_view_new), but our chat history itself is properly setup.</li>
			<li>Rebuild message list after file transfer deletes (or specific message)</li>
			<li>Create .deb file + Debian repo</li>
			<li>Clicking back while modifying peernick causes loss of changes (only in GTK4)</li>
			<li>Images should be clickable (to show larger).</li>
			<li>GStreamer or PortAudio library ( https://github.com/PortAudio/portaudio ) to record .wav type audio for voice messages / streaming chat / walkie mode. Notes elsewhere suggest Vorbis being preferable for streamed audio.</li>
			<li>Review any _swapped( and instead set proper args for given ::signal) (note: if signal can't be found in GTK docs, check gobject docs)</li>
			<li>Have some clang specific compile flags. Could add more. See CMakeLists.txt.</li>
			<li>Memory leakage: Free memory. Eliminate memory leaks so that it can valgrind 0. g_free, g_object_free(), etc Unsure how to handle sensitive things.</li>
			<li>Vertical mode: consider putting Send button below the emoji and attach buttons, or simply hide buttons other than Send while typing (like Flutter client).</li>
			<li>Gnotification can't use gresource icon. We already worked around it by dropping a .png, but we also have a .png for our .desktop file. If we set icon_logo to NULL, the icon registered with DBUS by .desktop will be used.</li>
			<li>Colored .svg icons will be available from GTK 4.14. Then search our code for gtk_symbolic_paintable_snapshot_symbolic, where we have an example implementation ready.</li>
		</ul>
	<section id="flutter">
		<h3>TODO List for Flutter client:</h3>
		<ul>
			<li>Flutter CMakeLists.txt: If jnilibs is populated with files, don't try to copy output binaries into jnilibs because if deleted the build dir and rebuilt a release only, it will be empty</li>
			<li>Tor transports (written in Go) need to be built and shipped: Lyrebird (replacing obfs4proxy?) && Conjure (really interesting)</li>
		<!--	<li>Crash: Occurs occassionally when application is in the background, especially when other high-RAM applications are running https://stackoverflow.com/questions/44425584/context-startforegroundservice-did-not-then-call-service-startforeground E/AndroidRuntime(12140): android.app.RemoteServiceException$ForegroundServiceDidNotStartInTimeException: Context.startForegroundService() did not then call Service.startForeground(): ServiceRecord{52682ad u0 com.torx.chat/com.dexterous.flutterlocalnotifications.ForegroundService}</li>  -->
			<li>Lifecycle: Notifications may have to handled by callbacks written in Java/Kotlin to prevent their disposal during lifecycle events. Singleton was attempted, but didn't help.</li>
			<li>Lifecycle: RestorationScopeId seems to not be saving our route. Unsure if it saves anything. If we can get it to work, we can use restorationId on TextField and ScrollView (note: security implications of saving to disk in cleartext)</li>
			<li>Lifecycle needs a full audit, including use of restorationScopeId, initialization_functions(), resumptionTasks()</li>
			<li>File picker caches in /data/user/0/com.torx.chat/cache/file_picker/, causing failure to resume outbound transfers after restarting</li>
			<li>Isolates: showsUserInterface should be false, but we can't get it to work. Seems like few if any have (seems like they only use it with cancelNotification): https://github.com/search?q=%22showsUserInterface%3A+false%22&type=code with the only exception being here: https://github.com/jenspfahl/EverydayTasks/blob/a85475deae37649ba8ef18978e19270e3ba7ebb6/lib/ui/pages/ScheduledTaskList.dart#L977 Note: If we re-write our notifications (and perhaps callbacks) in native code for better lifecycle management, this issue would be irrelevant.</li>
			<li>Client attempts to connect to https://firebaselogging.googleapis.com/v0cc/log/batch?format=json_proto3. Need to prevent that and verify that it isn't making other connections.</li>
			<li>Can we prevent other applications from knowing this application is installed?</li>
			<li>CMakeLists.txt: Depreciate the BUILD_BINARIES argument in favor of checking if they are already built.</li>
			<ul>
				<li>Passing environmental variables to CMake through Flutter seems unreliable at best (may only be working when building re-binaries, with clean directories, at best).</li>
				<li>Hardcode BUILD_BINARIES 1 temporarily</li>
				<li>Resolve issues / causes of unnecessary rebuilds (libevent related issue). Alternatively, BUILD_ALWAYS TRUE or otherwise force clean rebuild of libevent.</li>
				<li>Allow forcing of rebuilds for when deps change? CMake can ideally handle this</li>
			</ul>
			<li>CMakeLists.txt: Ship a release version of Tor instead of building from main (this requires following tor-announce mailing list and manually updating CMakeLists.txt for every stable release)</li>
			<li>Calling peer_accept() while actively modifying peernick results in modifications being lost</li>
			<li>autoRunOnBoot: true (foreground task) + fix BootBroadcastReceiver.kt, then have a toggle in settings page for both.</li>
			<li>Consider requesting battery optimization exemption</li>
			<li>Should use gallery with photo_view to allow swipping back/forward to see other images in PhotoView.</li>
			<li>Can't change app name on the fly, but can change icon. Could use it to notify user of messages or put alternate icon option (calculator, or something people never use). "The calculator theoretically opens chat but it doesn't work anymore. They said it requires entering a specific calculation," Micay said.</li>
			<li>Prevent un-encrypted backups of android data? Most chat apps do this but I'm on the fence because our data is encrypted, and we do want to support history migration. GrapheneOS project has some info that suggests we can block only unencrypted backups.</li>
			<li>Consider having a popup when adding something to clipboard. The clipboard would have a "Clear clipboard" and "Exit" option, along with a warning about other applications being able to steal clipboard contents. In some softwares (ie password managers), after ~45 seconds, it will clear the clipboard.</li>
			<li>MaterialBanner() anywhere it exists needs to be checked for functionality. It works at least on RouteTorrc but elsewhere may be non-functional.</li>
			<li>Delete getTemporaryDirectory().path/qr.png on program startup and shutdown. Zero and delete might be best.</li>
			<li>"Whenever items list is updated, ListView shall be updated automatically." https://googleflutter.com/flutter-add-item-to-listview-dynamically/ https://stackoverflow.com/questions/51343567/append-items-dynamically-to-listview</li>
			<li>Experiment in Noti with grouping notifications per-user.</li>
			<li>Comment out any unused color and language strings. Ensure that we don't have any strings not in our languages file.</li>
			<li>Message box height: 400 is too tall. Figure out a way to avoid hard coding it.</li>
			<li>AnimatedBuilder should replace most or all remaining of our setState calls, for efficiency. There are few left.</li>
			<li>We lose TorX log and Tor log contents every time we .detach, so we might consider to store it in a library defined C pointer so it stays in RAM. We would just need to create the pointer in lib and the remaining work is done in flutter. However, this is kind of contrary to the direction we are going, which is to be able to minimize RAM usage in Android.</li>
		</ul>
</body>
</html>
